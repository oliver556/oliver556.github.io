---
title: ES6 å®Œå…¨ä½¿ç”¨æ‰‹å†Œ
date: 2021-12-08 15:24:04
permalink: /pages/13d4f7/
categories:
  - å‰ç«¯æŠ€æœ¯
tags:
  - Webå¼€å‘
  - JavaScript
  - ES6ç³»åˆ—
---
  
# ES6 å®Œå…¨ä½¿ç”¨æ‰‹å†Œ

## ğŸ“–. å‰è¨€

1. è¿™é‡Œçš„ "ES6" æ³›æŒ‡ ES5 ä¹‹åçš„æ–°è¯­æ³• 
2. è¿™é‡Œçš„ "å®Œå…¨" æ˜¯æŒ‡æœ¬æ–‡å°½å¯èƒ½é½å…¨ 
3. è¿™é‡Œçš„ "ä½¿ç”¨" æ˜¯æŒ‡æœ¬æ–‡ä¼šå±•ç¤ºå¾ˆå¤š ES6 çš„ä½¿ç”¨åœºæ™¯ 
4. è¿™é‡Œçš„ "æ‰‹å†Œ" æ˜¯æŒ‡ä½ å¯ä»¥å‚ç…§æœ¬æ–‡å°†é¡¹ç›®æ›´å¤šçš„é‡æ„ä¸º ES6 è¯­æ³•

æ­¤å¤–è¿˜è¦æ³¨æ„è¿™é‡Œä¸ä¸€å®šå°±æ˜¯æ­£å¼è¿›å…¥è§„èŒƒçš„è¯­æ³•ã€‚

## ä¸€. let å’Œ const

åœ¨æˆ‘ä»¬å¼€å‘çš„æ—¶å€™ï¼Œå¯èƒ½è®¤ä¸ºåº”è¯¥é»˜è®¤ä½¿ç”¨ `let` è€Œä¸æ˜¯ `var`ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºéœ€è¦å†™ä¿æŠ¤çš„å˜é‡è¦ä½¿ç”¨ `const`ã€‚

ç„¶è€Œå¦ä¸€ç§åšæ³•æ—¥ç›Šæ™®åŠï¼šé»˜è®¤ä½¿ç”¨ `const`ï¼Œåªæœ‰å½“ç¡®å®éœ€è¦æ”¹å˜å˜é‡çš„å€¼çš„æ—¶å€™æ‰ä½¿ç”¨ `let`ã€‚è¿™æ˜¯å› ä¸ºå¤§éƒ¨åˆ†çš„å˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸åº”å†æ”¹å˜ï¼Œè€Œé¢„æ–™ä¹‹å¤–çš„å˜é‡çš„ä¿®æ”¹æ˜¯å¾ˆå¤š bug çš„æºå¤´ã€‚

```js
// ä¾‹å­ 1-1

// bad
var foo = 'bar';

// good
let foo = 'bar';

// better
const foo = 'bar';
```

## äºŒ. æ¨¡æ¿å­—ç¬¦ä¸²

### 1. æ¨¡æ¿å­—ç¬¦ä¸²

éœ€è¦æ‹¼æ¥å­—ç¬¦ä¸²çš„æ—¶å€™å°½é‡æ”¹æˆä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²:

```js
// ä¾‹å­ 2-1

// bad
const foo = 'this is a' + example;

// good
const foo = `this is a ${example}`;
```

### 2. æ ‡ç­¾æ¨¡æ¿

å¯ä»¥å€ŸåŠ©æ ‡ç­¾æ¨¡æ¿ä¼˜åŒ–ä¹¦å†™æ–¹å¼:

```js
// ä¾‹å­ 2-2

let url = oneLine `
    www.taobao.com/example/index.html
    ?foo=${foo}
    &bar=${bar}
`;

console.log(url); // www.taobao.com/example/index.html?foo=foo&bar=bar
```

oneLine çš„æºç å¯ä»¥å‚è€ƒ [ã€ŠES6 ç³»åˆ—ä¹‹æ¨¡æ¿å­—ç¬¦ä¸²ã€‹](https://github.com/mqyqingfeng/Blog/issues/84)

## ä¸‰. ç®­å¤´å‡½æ•°

ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸è¿‡ä»¥ä¸‹å‡ ç§æƒ…å†µé¿å…ä½¿ç”¨ï¼š

### 1. ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰å¯¹è±¡çš„æ–¹æ³•

```js
// ä¾‹å­ 3-1

// bad
let foo = {
  value: 1,
  getValue: () => console.log(this.value);
}

foo.getValue(); // undefined
```

### 2. å®šä¹‰åŸå‹æ–¹æ³•

```js
// ä¾‹å­ 3-2

// bad
function Foo() {
  this.value = 1;
}

Foo.prototype.getValue = () => console.log(this.value);

let foo = new Foo();
foo.getValue(); // undefined
```

### 3. ä½œä¸ºäº‹ä»¶çš„å›è°ƒå‡½æ•°

```js
// ä¾‹å­ 3-3

// bad
const button = document.getElementById('myButton');
button.addEventListener('click', () => {
    console.log(this === window); // => true
    this.innerHTML = 'Clicked button';
});
```

## å››. Symbol

### 1. å”¯ä¸€å€¼

```js
// ä¾‹å­ 4-1


// bad
// 1. åˆ›å»ºçš„å±æ€§ä¼šè¢« for-in æˆ– Object.keys() æšä¸¾å‡ºæ¥
// 2. ä¸€äº›åº“å¯èƒ½åœ¨å°†æ¥ä¼šä½¿ç”¨åŒæ ·çš„æ–¹å¼ï¼Œè¿™ä¼šä¸ä½ çš„ä»£ç å‘ç”Ÿå†²çª
if (element.isMoving) {
  smoothAnimations(element);
}
element.isMoving = true;

// good
if (element.__$jorendorff_animation_library$PLEASE_DO_NOT_USE_THIS_PROPERTY$isMoving__) {
  smoothAnimations(element);
}
element.__$jorendorff_animation_library$PLEASE_DO_NOT_USE_THIS_PROPERTY$isMoving__ = true;

// better
var isMoving = Symbol("isMoving");

...

if (element[isMoving]) {
  smoothAnimations(element);
}
element[isMoving] = true;
```

### 2. é­”æœ¯å­—ç¬¦ä¸²

é­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯åœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚

é­”æœ¯å­—ç¬¦ä¸²ä¸åˆ©äºä¿®æ”¹å’Œç»´æŠ¤ï¼Œé£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œæ”¹ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚

```js
// ä¾‹å­ 4-1

// bad
const TYPE_AUDIO = 'AUDIO'
const TYPE_VIDEO = 'VIDEO'
const TYPE_IMAGE = 'IMAGE'

// good
const TYPE_AUDIO = Symbol()
const TYPE_VIDEO = Symbol()
const TYPE_IMAGE = Symbol()

function handleFileResource(resource) {
  switch(resource.type) {
    case TYPE_AUDIO:
      playAudio(resource)
      break
    case TYPE_VIDEO:
      playVideo(resource)
      break
    case TYPE_IMAGE:
      previewImage(resource)
      break
    default:
      throw new Error('Unknown type of resource')
  }
}
```

### 3. ç§æœ‰å˜é‡

Symbol ä¹Ÿå¯ä»¥ç”¨äºç§æœ‰å˜é‡çš„å®ç°ã€‚

```js
// ä¾‹å­ 4-3

const Example = (function() {
    var _private = Symbol('private');

    class Example {
        constructor() {
          this[_private] = 'private';
        }
        getName() {
          return this[_private];
        }
    }

    return Example;
})();

var ex = new Example();

console.log(ex.getName()); // private
console.log(ex.name); // undefined
```

## äº”. Set å’Œ Map

### 1. æ•°ç»„å»é‡

```js
// ä¾‹å­ 5-1

[...new Set(array)]
```

### 2. æ¡ä»¶è¯­å¥çš„ä¼˜åŒ–

```js
// ä¾‹å­ 5-2
// æ ¹æ®é¢œè‰²æ‰¾å‡ºå¯¹åº”çš„æ°´æœ

// bad
function test(color) {
  switch (color) {
    case 'red':
      return ['apple', 'strawberry'];
    case 'yellow':
      return ['banana', 'pineapple'];
    case 'purple':
      return ['grape', 'plum'];
    default:
      return [];
  }
}

test('yellow'); // ['banana', 'pineapple']
```

```js
// good
const fruitColor = {
  red: ['apple', 'strawberry'],
  yellow: ['banana', 'pineapple'],
  purple: ['grape', 'plum']
};

function test(color) {
  return fruitColor[color] || [];
}
```

```js
// better
const fruitColor = new Map()
  .set('red', ['apple', 'strawberry'])
  .set('yellow', ['banana', 'pineapple'])
  .set('purple', ['grape', 'plum']);

function test(color) {
  return fruitColor.get(color) || [];
}
```

## å…­. for of

### 1. éå†èŒƒå›´

`for...of` å¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬ï¼š

1. æ•°ç»„ 
2. Set 
3. Map 
4. ç±»æ•°ç»„å¯¹è±¡ï¼Œå¦‚ arguments å¯¹è±¡ã€DOM NodeList å¯¹è±¡ 
5. Generator å¯¹è±¡ 
6. å­—ç¬¦ä¸²

### 2. ä¼˜åŠ¿

ES2015 å¼•å…¥äº† `for..of` å¾ªç¯ï¼Œå®ƒç»“åˆäº† `forEach` çš„ç®€æ´æ€§å’Œä¸­æ–­å¾ªç¯çš„èƒ½åŠ›ï¼š

```js
// ä¾‹å­ 6-1

for (const v of ['a', 'b', 'c']) {
  console.log(v);
}
// a b c

for (const [i, v] of ['a', 'b', 'c'].entries()) {
  console.log(i, v);
}
// 0 "a"
// 1 "b"
// 2 "c"
```

### 3. éå† Map

```js
// ä¾‹å­ 6-2

let map = new Map(arr);

// éå† key å€¼
for (let key of map.keys()) {
  console.log(key);
}

// éå† value å€¼
for (let value of map.values()) {
  console.log(value);
}

// éå† key å’Œ value å€¼(ä¸€)
for (let item of map.entries()) {
  console.log(item[0], item[1]);
}

// éå† key å’Œ value å€¼(äºŒ)
for (let [key, value] of data) {
  console.log(key)
}
```

## ä¸ƒ. Promise

### 1. åŸºæœ¬ç¤ºä¾‹

```js
// ä¾‹å­ 7-1

// bad
request(url, function(err, res, body) {
    if (err) handleError(err);
    fs.writeFile('1.txt', body, function(err) {
        request(url2, function(err, res, body) {
            if (err) handleError(err);
        })
    })
});

// good
request(url)
.then(function(result) {
    return writeFileAsynv('1.txt', result);
})
.then(function(result) {
    return request(url2);
})
.catch(function(e){
    handleError(e);
});
```

### 2. finally

```js
// ä¾‹å­ 7-2

fetch('file.json')
.then(data => data.json())
.catch(error => console.error(error))
.finally(() => console.log('finished'));
```

## å…«. Async

### 1. ä»£ç æ›´åŠ ç®€æ´

```js
// ä¾‹å­ 8-1

// good
function fetch() {
  return (
    fetchData()
    .then(() => {
      return "done"
    });
  )
}

// better
async function fetch() {
  await fetchData();
  return "done"
};
```

```js
// ä¾‹å­ 8-2

// good
function fetch() {
  return fetchData();
  .then(data => {
    if (data.moreData) {
        return fetchAnotherData(data)
        .then(moreData => {
          return moreData;
        })
    } else {
      return data;
    }
  });
}

// better
async function fetch() {
  const data = await fetchData();
  if (data.moreData) {
    const moreData = await fetchAnotherData(data);
    return moreData;
  } else {
    return data;
  }
};
```

```js
// ä¾‹å­ 8-3

// good
function fetch() {
  return (
    fetchData()
    .then(value1 => {
      return fetchMoreData(value1);
    })
    .then(value2 => {
      return fetchMoreData2(value2);
    })
  )
}

// better
async function fetch() {
  const value1 = await fetchData();
  const value2 = await fetchMoreData(value1);
  return fetchMoreData2(value2);
};
```

### 2. é”™è¯¯å¤„ç†

```js
// ä¾‹å­ 8-4

// good
function fetch() {
  try {
    fetchData()
      .then(result => {
        const data = JSON.parse(result);
      })
      .catch((err) => {
        console.log(err);
      })
  } catch (err) {
    console.log(err);
  }
}

// better
async function fetch() {
  try {
    const data = JSON.parse(await fetchData());
  } catch (err) {
    console.log(err);
  }
};
```

### 3. "async åœ°ç‹±"

```js
// ä¾‹å­ 8-5

// bad
(async () => {
  const getList = await getList();
  const getAnotherList = await getAnotherList();
})();

// good
(async () => {
  const listPromise = getList();
  const anotherListPromise = getAnotherList();
  await listPromise;
  await anotherListPromise;
})();

// good
(async () => {
  Promise.all([getList(), getAnotherList()]).then(...);
})();
```

## ä¹. Class

æ„é€ å‡½æ•°å°½å¯èƒ½ä½¿ç”¨ Class çš„å½¢å¼

```js
// ä¾‹å­ 9-1

class Foo {
  static bar () {
    this.baz();
  }
  static baz () {
    console.log('hello');
  }
  baz () {
    console.log('world');
  }
}

Foo.bar(); // hello
```

```js
// ä¾‹å­ 9-2

class Shape {
  constructor(width, height) {
    this._width = width;
    this._height = height;
  }
  get area() {
    return this._width * this._height;
  }
}

const square = new Shape(10, 10);
console.log(square.area);    // 100
console.log(square._width);  // 10
```

## å. Decorator

### 1. log

```js
// ä¾‹å­ 10-1

class Math {
  @log
  add(a, b) {
    return a + b;
  }
}
```

log çš„å®ç°å¯ä»¥å‚è€ƒ [ã€ŠES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨ã€‹](18.ES6ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨.md)

### 2. autobind

```js
// ä¾‹å­ 10-2

class Toggle extends React.Component {

  @autobind
  handleClick() {
    console.log(this)
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        button
      </button>
    );
  }
}
```

autobind çš„å®ç°å¯ä»¥å‚è€ƒ [ã€ŠES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨ã€‹](18.ES6ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨.md)

### 3. debounce

```js
// ä¾‹å­ 10-3

class Toggle extends React.Component {

  @debounce(500, true)
  handleClick() {
    console.log('toggle')
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        button
      </button>
    );
  }
}
```

debounce çš„å®ç°å¯ä»¥å‚è€ƒ [ã€ŠES6 ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨ã€‹](18.ES6ç³»åˆ—ä¹‹æˆ‘ä»¬æ¥èŠèŠè£…é¥°å™¨.md)

### 4. React ä¸ Redux

```js
// ä¾‹å­ 10-4

// good
class MyReactComponent extends React.Component {}

export default connect(mapStateToProps, mapDispatchToProps)(MyReactComponent);

// better
@connect(mapStateToProps, mapDispatchToProps)
export default class MyReactComponent extends React.Component {};
```

## åä¸€. å‡½æ•°

### 1. é»˜è®¤å€¼

```js
// ä¾‹å­ 11-1

// bad
function test(quantity) {
  const q = quantity || 1;
}

// good
function test(quantity = 1) {
  ...
}
```

```js
// ä¾‹å­ 11-2

doSomething({ foo: 'Hello', bar: 'Hey!', baz: 42 });

// bad
function doSomething(config) {
  const foo = config.foo !== undefined ? config.foo : 'Hi';
  const bar = config.bar !== undefined ? config.bar : 'Yo!';
  const baz = config.baz !== undefined ? config.baz : 13;
}

// good
function doSomething({ foo = 'Hi', bar = 'Yo!', baz = 13 }) {
  ...
}

// better
function doSomething({ foo = 'Hi', bar = 'Yo!', baz = 13 } = {}) {
  ...
}
```

```js
// ä¾‹å­ 11-3

// bad
const Button = ({className}) => {
	const classname = className || 'default-size';
	return <span className={classname}></span>
};

// good
const Button = ({className = 'default-size'}) => (
	<span className={classname}></span>
);

// better
const Button = ({className}) =>
	<span className={className}></span>
}

Button.defaultProps = {
	className: 'default-size'
}
```

```js
// ä¾‹å­ 11-4

const required = () => {throw new Error('Missing parameter')};

const add = (a = required(), b = required()) => a + b;

add(1, 2) // 3
add(1); // Error: Missing parameter.
```

## åäºŒ. æ‹“å±•è¿ç®—ç¬¦

### 1. arguments è½¬æ•°ç»„

```js
// ä¾‹å­ 12-1

// bad
function sortNumbers() {
  return Array.prototype.slice.call(arguments).sort();
}

// good
const sortNumbers = (...numbers) => numbers.sort();
```

### 2. è°ƒç”¨å‚æ•°

```js
// ä¾‹å­ 12-2

// bad
Math.max.apply(null, [14, 3, 77])

// good
Math.max(...[14, 3, 77])
// ç­‰åŒäº
Math.max(14, 3, 77);
```

### 3. æ„å»ºå¯¹è±¡

å‰”é™¤éƒ¨åˆ†å±æ€§ï¼Œå°†å‰©ä¸‹çš„å±æ€§æ„å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡

```js
// ä¾‹å­ 12-3
let [a, b, ...arr] = [1, 2, 3, 4, 5];

const { a, b, ...others } = { a: 1, b: 2, c: 3, d: 4, e: 5 };
```

æœ‰æ¡ä»¶çš„æ„å»ºå¯¹è±¡

```js
// ä¾‹å­ 12-4

// bad
function pick(data) {
  const { id, name, age} = data

  const res = { guid: id }

  if (name) {
    res.name = name
  }
  else if (age) {
    res.age = age
  }

  return res
}

// good
function pick({id, name, age}) {
  return {
    guid: id,
    ...(name && {name}),
    ...(age && {age})
  }
}
```

åˆå¹¶å¯¹è±¡

```js
// ä¾‹å­ 12-5

let obj1 = { a: 1, b: 2,c: 3 }
let obj2 = { b: 4, c: 5, d: 6}
let merged = {...obj1, ...obj2};
```

### 4. React

å°†å¯¹è±¡å…¨éƒ¨ä¼ å…¥ç»„ä»¶

```js
// ä¾‹å­ 12-6

const parmas =  {value1: 1, value2: 2, value3: 3}

<Test {...parmas} />
```

## åä¸‰. åŒå†’å·è¿ç®—ç¬¦

```js
// ä¾‹å­ 13-1

foo::bar;
// ç­‰åŒäº
bar.bind(foo);

foo::bar(...arguments);
// ç­‰åŒäº
bar.apply(foo, arguments);
```

å¦‚æœåŒå†’å·å·¦è¾¹ä¸ºç©ºï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œåˆ™ç­‰äºå°†è¯¥æ–¹æ³•ç»‘å®šåœ¨è¯¥å¯¹è±¡ä¸Šé¢ã€‚

```js
// ä¾‹å­ 13-2

var method = obj::obj.foo;
// ç­‰åŒäº
var method = ::obj.foo;

let log = ::console.log;
// ç­‰åŒäº
var log = console.log.bind(console);
```

## åå››. è§£æ„èµ‹å€¼

### 1. å¯¹è±¡çš„åŸºæœ¬è§£æ„

```js
// ä¾‹å­ 14-1

componentWillReceiveProps(newProps) {
	this.setState({
		active: newProps.active
	})
}

componentWillReceiveProps({active}) {
	this.setState({active})
}
```

```js
// ä¾‹å­ 14-2

// bad
handleEvent = () => {
  this.setState({
    data: this.state.data.set("key", "value")
  })
};

// good
handleEvent = () => {
  this.setState(({data}) => ({
    data: data.set("key", "value")
  }))
};
```

```js
// ä¾‹å­ 14-3

Promise.all([Promise.resolve(1), Promise.resolve(2)])
.then(([x, y]) => {
    console.log(x, y);
});
```

### 2. å¯¹è±¡æ·±åº¦è§£æ„

```js
// ä¾‹å­ 14-4

// bad
function test(fruit) {
  if (fruit && fruit.name)  {
    console.log (fruit.name);
  } else {
    console.log('unknown');
  }
}

// good
function test({name} = {}) {
  console.log (name || 'unknown');
}
```

```js
// ä¾‹å­ 14-5

let obj = {
    a: {
      b: {
        c: 1
      }
    }
};

const {a: {b: {c = ''} = ''} = ''} = obj;
```

### 3. æ•°ç»„è§£æ„

```js
// ä¾‹å­ 14-6

// bad
const splitLocale = locale.split("-");
const language = splitLocale[0];
const country = splitLocale[1];

// good
const [language, country] = locale.split('-');
```

### 4. å˜é‡é‡å‘½å

```js
// ä¾‹å­ 14-8

let { foo: baz } = { foo: 'aaa', bar: 'bbb' };
console.log(baz); // "aaa"
```

### 5. ä»…è·å–éƒ¨åˆ†å±æ€§

```js
// ä¾‹å­ 14-9

function test(input) {
  return [left, right, top, bottom];
}
const [left, __, top] = test(input);

function test(input) {
  return { left, right, top, bottom };
}
const { left, right } = test(input);
```

## åäº”. å¢å¼ºçš„å¯¹è±¡å­—é¢é‡

```js
// ä¾‹å­ 15-1

// bad
const something = 'y'
const x = {
  something: something
}

// good
const something = 'y'
const x = {
  something
};
```

åŠ¨æ€å±æ€§

```js
// ä¾‹å­ 15-2

const x = {
  ['a' + '_' + 'b']: 'z'
}

console.log(x.a_b); // z
```

## åå…­. æ•°ç»„çš„æ‹“å±•æ–¹æ³•

### 1. keys

```js
// ä¾‹å­ 16-1

var arr = ["a", , "c"];

var sparseKeys = Object.keys(arr);
console.log(sparseKeys); // ['0', '2']

var denseKeys = [...arr.keys()];
console.log(denseKeys);  // [0, 1, 2]
```

### 2. entries

```js
// ä¾‹å­ 16-2

var arr = ["a", "b", "c"];
var iterator = arr.entries();

for (let e of iterator) {
    console.log(e);
}
```

### 3. values

```js
// ä¾‹å­ 16-3

let arr = ['w', 'y', 'k', 'o', 'p'];
let eArr = arr.values();

for (let letter of eArr) {
  console.log(letter);
}
```

### 4. includes

```js
// ä¾‹å­ 16-4

// bad
function test(fruit) {
  if (fruit == 'apple' || fruit == 'strawberry') {
    console.log('red');
  }
}

// good
function test(fruit) {
  const redFruits = ['apple', 'strawberry', 'cherry', 'cranberries'];
  if (redFruits.includes(fruit)) {
    console.log('red');
  }
}
```

### 5. find

```js
// ä¾‹å­ 16-5

var inventory = [
    {name: 'apples', quantity: 2},
    {name: 'bananas', quantity: 0},
    {name: 'cherries', quantity: 5}
];

function findCherries(fruit) {
    return fruit.name === 'cherries';
}

console.log(inventory.find(findCherries)); // { name: 'cherries', quantity: 5 }
```

### 6. findIndex

```js
// ä¾‹å­ 16-6

function isPrime(element, index, array) {
  var start = 2;
  while (start <= Math.sqrt(element)) {
    if (element % start++ < 1) {
      return false;
    }
  }
  return element > 1;
}

console.log([4, 6, 8, 12].findIndex(isPrime)); // -1, not found
console.log([4, 6, 7, 12].findIndex(isPrime)); // 2
```

æ›´å¤šçš„å°±ä¸åˆ—ä¸¾äº†ã€‚

## åä¸ƒ. [optional-chaining](https://github.com/tc39/proposal-optional-chaining)

ä¸¾ä¸ªä¾‹å­ï¼š

```js
// ä¾‹å­ 17-1

const obj = {
  foo: {
    bar: {
      baz: 42,
    },
  },
};

const baz = obj?.foo?.bar?.baz; // 42
```

åŒæ ·æ”¯æŒå‡½æ•°ï¼š

```js
// ä¾‹å­ 17-2

function test() {
  return 42;
}
test?.(); // 42

exists?.(); // undefined
```

éœ€è¦æ·»åŠ  [@babel/plugin-proposal-optional-chaining](https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining#example) æ’ä»¶æ”¯æŒ

## åå…«. logical-assignment-operators

```js
// ä¾‹å­ 18-1

a ||= b;

obj.a.b ||= c;

a &&= b;

obj.a.b &&= c;
```

Babel ç¼–è¯‘ä¸ºï¼š

```js
var _obj$a, _obj$a2;

a || (a = b);

(_obj$a = obj.a).b || (_obj$a.b = c);

a && (a = b);

(_obj$a2 = obj.a).b && (_obj$a2.b = c);
```

å‡ºç°çš„åŸå› ï¼š

```js
// ä¾‹å­ 18-2

function example(a = b) {
  // a å¿…é¡»æ˜¯ undefined
  if (!a) {
    a = b;
  }
}

function numeric(a = b) {
  // a å¿…é¡»æ˜¯ null æˆ–è€… undefined
  if (a == null) {
    a = b;
  }
}

// a å¯ä»¥æ˜¯ä»»ä½• falsy çš„å€¼
function example(a = b) {
  // å¯ä»¥ï¼Œä½†æ˜¯ä¸€å®šä¼šè§¦å‘ setter
  a = a || b;

  // ä¸ä¼šè§¦å‘ setterï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´ lint error
  a || (a = b);

  // å°±æœ‰äººæå‡ºäº†è¿™ç§å†™æ³•ï¼š
  a ||= b;
}
```

éœ€è¦ [@babel/plugin-proposal-logical-assignment-operators](https://babeljs.io/docs/en/babel-plugin-proposal-logical-assignment-operators) æ’ä»¶æ”¯æŒ

## åä¹. nullish-coalescing-operator

```js
a ?? b

// ç›¸å½“äº

(a !== null && a !== void 0) ? a : b
```

ä¸¾ä¸ªä¾‹å­ï¼š

```js
var foo = object.foo ?? "default";

// ç›¸å½“äº

var foo = (object.foo != null) ? object.foo : "default";
```

éœ€è¦ [@babel/plugin-proposal-nullish-coalescing-operator](https://babeljs.io/docs/en/babel-plugin-proposal-nullish-coalescing-operator) æ’ä»¶æ”¯æŒ

## äºŒå. pipeline-operator

```js
const double = (n) => n * 2;
const increment = (n) => n + 1;

// æ²¡æœ‰ç”¨ç®¡é“æ“ä½œç¬¦
double(increment(double(5))); // 22

// ç”¨ä¸Šç®¡é“æ“ä½œç¬¦ä¹‹å
5 |> double |> increment |> double; // 22
```

## ğŸŒŸ. å‚è€ƒ

- [ES6 å®è·µè§„èŒƒ](https://juejin.im/post/5934ff6d2f301e005861422f)
- [babel 7 ç®€å•å‡çº§æŒ‡å—](https://juejin.im/post/5b87cab1e51d4538ac05dc54)
- [ä¸å¾—ä¸çŸ¥çš„ ES6 å°æŠ€å·§](https://mp.weixin.qq.com/s/NAbvosbJ4utOgFaM-6wO4Q?)
- [æ·±å…¥è§£æ ES6ï¼šSymbol](http://bubkoo.com/2015/07/24/es6-in-depth-symbols/)
- [ä»€ä¹ˆæ—¶å€™ä½ ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Ÿ](https://zhuanlan.zhihu.com/p/26540168)
- [ä¸€äº›ä½¿ JavaScript æ›´åŠ ç®€æ´çš„å°æŠ€å·§](https://www.css88.com/archives/9868)
- [å‡ åˆ†é’Ÿå†…æå‡æŠ€èƒ½çš„ 8 ä¸ª JavaScript æ–¹æ³•](https://www.css88.com/archives/9916)
- [[è¯‘] å¦‚ä½•ä½¿ç”¨ JavaScript ES6 æœ‰æ¡ä»¶åœ°æ„é€ å¯¹è±¡](https://juejin.im/post/5bb47db76fb9a05d071953ea)
- [5 ä¸ªæŠ€å·§è®©ä½ æ›´å¥½çš„ç¼–å†™ JavaScript(ES6) ä¸­æ¡ä»¶è¯­å¥](https://www.css88.com/archives/9865)
- [ES6 å¸¦æ¥çš„é‡å¤§ç‰¹æ€§ â€“ JavaScript å®Œå…¨æ‰‹å†Œï¼ˆ2018ç‰ˆï¼‰](https://www.css88.com/archives/9958)
