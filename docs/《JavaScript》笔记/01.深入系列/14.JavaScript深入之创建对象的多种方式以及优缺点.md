---
title: JavaScript æ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹
date: 2021-10-13 21:38:21
permalink: /pages/724163/
categories:
  - å‰ç«¯æŠ€æœ¯
tags:
  - JavaScript æ·±å…¥
---

# JavaScript æ·±å…¥ä¹‹åˆ›å»ºå¯¹è±¡çš„å¤šç§æ–¹å¼ä»¥åŠä¼˜ç¼ºç‚¹

## ğŸŒŸï¸. å†™åœ¨å‰é¢

è¿™ç¯‡æ–‡ç« è®²è§£åˆ›å»ºå¯¹è±¡çš„å„ç§æ–¹å¼ï¼Œä»¥åŠä¼˜ç¼ºç‚¹ã€‚

ä½†æ˜¯æ³¨æ„ï¼š

è¿™ç¯‡æ–‡ç« æ›´åƒæ˜¯ç¬”è®°ï¼Œå› ä¸ºã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹å†™å¾—çœŸæ˜¯å¤ªå¥½äº†ï¼

## ä¸€. å·¥å‚æ¨¡å¼

```js
function createPerson(name) {
  var o = new Object();
  o.name = name;
  o.getName = function () {
    console.log(this.name);
  };

  return o;
}

var person1 = createPerson('kevin');
```

ç¼ºç‚¹ï¼šå¯¹è±¡æ— æ³•è¯†åˆ«ï¼Œå› ä¸ºæ‰€æœ‰çš„å®ä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªåŸå‹

## äºŒ. æ„é€ å‡½æ•°æ¨¡å¼

```js
function Person(name) {
  this.name = name;
  this.getName = function () {
    console.log(this.name);
  };
}

var person1 = new Person('kevin');
```

ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥è¯†åˆ«ä¸ºä¸€ä¸ªç‰¹å®šçš„ç±»å‹

ç¼ºç‚¹ï¼šæ¯æ¬¡åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«åˆ›å»ºä¸€æ¬¡

### 2.1 æ„é€ å‡½æ•°æ¨¡å¼ä¼˜åŒ–

```js
function Person(name) {
  this.name = name;
  this.getName = getName;
}

function getName() {
  console.log(this.name);
}

var person1 = new Person('kevin');
```

ä¼˜ç‚¹ï¼šè§£å†³äº†æ¯ä¸ªæ–¹æ³•éƒ½è¦è¢«é‡æ–°åˆ›å»ºçš„é—®é¢˜

ç¼ºç‚¹ï¼šè¿™å«å•¥å°è£…â€¦â€¦

## ä¸‰. åŸå‹æ¨¡å¼

```js
function Person(name) {

}

Person.prototype.name = 'keivn';
Person.prototype.getName = function () {
  console.log(this.name);
};

var person1 = new Person();
```

ä¼˜ç‚¹ï¼šæ–¹æ³•ä¸ä¼šé‡æ–°åˆ›å»º

ç¼ºç‚¹ï¼š1. æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•éƒ½å…±äº« 2. ä¸èƒ½åˆå§‹åŒ–å‚æ•°

### 3.1 åŸå‹æ¨¡å¼ä¼˜åŒ–

```js
function Person(name) {

}

Person.prototype = {
  name: 'kevin',
  getName: function () {
    console.log(this.name);
  }
};

var person1 = new Person();
```

ä¼˜ç‚¹ï¼šå°è£…æ€§å¥½äº†ä¸€ç‚¹

ç¼ºç‚¹ï¼šé‡å†™äº†åŸå‹ï¼Œä¸¢å¤±äº†constructorå±æ€§

### 3.2 åŸå‹æ¨¡å¼ä¼˜åŒ–

```js
function Person(name) {

}

Person.prototype = {
  constructor: Person,
  name: 'kevin',
  getName: function () {
    console.log(this.name);
  }
};

var person1 = new Person();
```

ä¼˜ç‚¹ï¼šå®ä¾‹å¯ä»¥é€šè¿‡constructorå±æ€§æ‰¾åˆ°æ‰€å±æ„é€ å‡½æ•°

ç¼ºç‚¹ï¼šåŸå‹æ¨¡å¼è¯¥æœ‰çš„ç¼ºç‚¹è¿˜æ˜¯æœ‰

## å››. ç»„åˆæ¨¡å¼

æ„é€ å‡½æ•°æ¨¡å¼ä¸åŸå‹æ¨¡å¼åŒå‰‘åˆç’§ã€‚

```js
function Person(name) {
  this.name = name;
}

Person.prototype = {
  constructor: Person,
  getName: function () {
    console.log(this.name);
  }
};

var person1 = new Person();
```

ä¼˜ç‚¹ï¼šè¯¥å…±äº«çš„å…±äº«ï¼Œè¯¥ç§æœ‰çš„ç§æœ‰ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„æ–¹å¼

ç¼ºç‚¹ï¼šæœ‰çš„äººå°±æ˜¯å¸Œæœ›å…¨éƒ¨éƒ½å†™åœ¨ä¸€èµ·ï¼Œå³æ›´å¥½çš„å°è£…æ€§

### 4.1 åŠ¨æ€åŸå‹æ¨¡å¼

```js
function Person(name) {
  this.name = name;
  if (typeof this.getName != "function") {
    Person.prototype.getName = function () {
      console.log(this.name);
    }
  }
}

var person1 = new Person();
```

æ³¨æ„ï¼šä½¿ç”¨åŠ¨æ€åŸå‹æ¨¡å¼æ—¶ï¼Œä¸èƒ½ç”¨å¯¹è±¡å­—é¢é‡é‡å†™åŸå‹ã€‚

è§£é‡Šä¸‹ä¸ºä»€ä¹ˆï¼š

```js
function Person(name) {
  this.name = name;
  if (typeof this.getName != "function") {
    Person.prototype = {
      constructor: Person,
      getName: function () {
        console.log(this.name);
      }
    }
  }
}

var person1 = new Person('kevin');
var person2 = new Person('daisy');

// æŠ¥é”™ å¹¶æ²¡æœ‰è¯¥æ–¹æ³•
person1.getName();

// æ³¨é‡Šæ‰ä¸Šé¢çš„ä»£ç ï¼Œè¿™å¥æ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚
person2.getName();
```

ä¸ºäº†è§£é‡Šè¿™ä¸ªé—®é¢˜ï¼Œå‡è®¾å¼€å§‹æ‰§è¡Œ `var person1 = new Person('kevin')`ã€‚

å¦‚æœå¯¹ `new` å’Œ `apply` çš„åº•å±‚æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¯ä»¥é˜…è¯»åº•éƒ¨ç›¸å…³é“¾æ¥ä¸­çš„æ–‡ç« ã€‚

æˆ‘ä»¬å›é¡¾ä¸‹ new çš„å®ç°æ­¥éª¤ï¼š

  1. é¦–å…ˆæ–°å»ºä¸€ä¸ªå¯¹è±¡
  2. ç„¶åå°†å¯¹è±¡çš„åŸå‹æŒ‡å‘ Person.prototype
  3. ç„¶å Person.apply(obj)
  4. è¿”å›è¿™ä¸ªå¯¹è±¡

æ³¨æ„è¿™ä¸ªæ—¶å€™ï¼Œå›é¡¾ä¸‹ apply çš„å®ç°æ­¥éª¤ï¼Œä¼šæ‰§è¡Œ `obj.Person` æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæ‰§è¡Œ `if` è¯­å¥é‡Œçš„å†…å®¹ï¼Œæ³¨æ„æ„é€ å‡½æ•°çš„ `prototype` å±æ€§æŒ‡å‘äº†å®ä¾‹çš„åŸå‹ï¼Œä½¿ç”¨å­—é¢é‡æ–¹å¼ç›´æ¥è¦†ç›– `Person.prototype`ï¼Œ
å¹¶ä¸ä¼šæ›´æ”¹å®ä¾‹çš„åŸå‹çš„å€¼ï¼Œperson1 ä¾ç„¶æ˜¯æŒ‡å‘äº†ä»¥å‰çš„åŸå‹ï¼Œè€Œä¸æ˜¯ `Person.prototype`ã€‚è€Œä¹‹å‰çš„åŸå‹æ˜¯æ²¡æœ‰ `getName` æ–¹æ³•çš„ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ï¼

å¦‚æœä½ å°±æ˜¯æƒ³ç”¨å­—é¢é‡æ–¹å¼å†™ä»£ç ï¼Œå¯ä»¥å°è¯•ä¸‹è¿™ç§ï¼š

```js
function Person(name) {
  this.name = name;
  if (typeof this.getName != "function") {
    Person.prototype = {
      constructor: Person,
      getName: function () {
        console.log(this.name);
      }
  }

    return new Person(name);
  }
}

var person1 = new Person('kevin');
var person2 = new Person('daisy');

person1.getName(); // kevin
person2.getName();  // daisy
```

### 4.2 å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼

```js
function Person(name) {

  var o = new Object();
  o.name = name;
  o.getName = function () {
    console.log(this.name);
  };

  return o;

}

var person1 = new Person('kevin');
console.log(person1 instanceof Person) // false
console.log(person1 instanceof Object)  // true
```

å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºåº”è¯¥è¿™æ ·è¯»ï¼š

å¯„ç”Ÿ-æ„é€ å‡½æ•°-æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯„ç”Ÿåœ¨æ„é€ å‡½æ•°çš„ä¸€ç§æ–¹æ³•ã€‚

ä¹Ÿå°±æ˜¯è¯´æ‰“ç€æ„é€ å‡½æ•°çš„å¹Œå­æŒ‚ç¾Šå¤´å–ç‹—è‚‰ï¼Œä½ çœ‹åˆ›å»ºçš„å®ä¾‹ä½¿ç”¨ `instanceof` éƒ½æ— æ³•æŒ‡å‘æ„é€ å‡½æ•°ï¼

è¿™æ ·æ–¹æ³•å¯ä»¥åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªå…·æœ‰é¢å¤–æ–¹æ³•çš„ç‰¹æ®Šæ•°ç»„ï¼Œä½†æ˜¯åˆä¸æƒ³ç›´æ¥ä¿®æ”¹ Array æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š

```js
function SpecialArray() {
  var values = new Array();

  for (var i = 0, len = arguments.length; i < len; i++) {
    values.push(arguments[i]);
  }

  values.toPipedString = function () {
    return this.join("|");
  };
  return values;
}

var colors = new SpecialArray('red', 'blue', 'green');
var colors2 = SpecialArray('red2', 'blue2', 'green2');


console.log(colors);
console.log(colors.toPipedString()); // red|blue|green

console.log(colors2);
console.log(colors2.toPipedString()); // red2|blue2|green2
```

ä½ ä¼šå‘ç°ï¼Œå…¶å®æ‰€è°“çš„å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯æ¯”å·¥å‚æ¨¡å¼åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¤šä½¿ç”¨äº†ä¸€ä¸ª newï¼Œå®é™…ä¸Šä¸¤è€…çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚

ä½†æ˜¯ä½œè€…å¯èƒ½æ˜¯å¸Œæœ›èƒ½åƒä½¿ç”¨æ™®é€š Array ä¸€æ ·ä½¿ç”¨ `SpecialArray`ï¼Œè™½ç„¶æŠŠ `SpecialArray` å½“æˆå‡½æ•°ä¹Ÿä¸€æ ·èƒ½ç”¨ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ä½œè€…çš„æœ¬æ„ï¼Œä¹Ÿå˜å¾—ä¸ä¼˜é›…ã€‚

åœ¨å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œä¸è¦ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚

ä½†æ˜¯å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šé¢ä¾‹å­ä¸­çš„å¾ªç¯ï¼š

```js
for (var i = 0, len = arguments.length; i < len; i++) {
  values.push(arguments[i]);
}
```

å¯ä»¥æ›¿æ¢æˆï¼š

```js
values.push.apply(values, arguments);
```

### 4.3 ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼

```js
function person(name){
  var o = new Object();
  o.sayName = function(){
    console.log(name);
  };
  return o;
}

var person1 = person('kevin');

person1.sayName(); // kevin

person1.name = "daisy";

person1.sayName(); // kevin

console.log(person1.name); // daisy
```

æ‰€è°“ç¨³å¦¥å¯¹è±¡ï¼ŒæŒ‡çš„æ˜¯æ²¡æœ‰å…¬å…±å±æ€§ï¼Œè€Œä¸”å…¶æ–¹æ³•ä¹Ÿä¸å¼•ç”¨ `this` çš„å¯¹è±¡ã€‚

ä¸å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼æœ‰ä¸¤ç‚¹ä¸åŒï¼š

  1. æ–°åˆ›å»ºçš„å®ä¾‹æ–¹æ³•ä¸å¼•ç”¨ this
  2. ä¸ä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°

ç¨³å¦¥å¯¹è±¡æœ€é€‚åˆåœ¨ä¸€äº›å®‰å…¨çš„ç¯å¢ƒä¸­ã€‚

ç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ä¹Ÿè·Ÿå·¥å‚æ¨¡å¼ä¸€æ ·ï¼Œæ— æ³•è¯†åˆ«å¯¹è±¡æ‰€å±ç±»å‹ã€‚

## ğŸ”—. ç›¸å…³é“¾æ¥

- [ã€ŠJavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾ã€‹](01.JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾.md)
- [ã€ŠJavaScriptæ·±å…¥ç³»åˆ—ä¹‹newçš„æ¨¡æ‹Ÿå®ç°ã€‹](12.JavaScriptæ·±å…¥ç³»åˆ—ä¹‹newçš„æ¨¡æ‹Ÿå®ç°.md)
- [ã€ŠJavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°ã€‹](10.JavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®ç°.md)
