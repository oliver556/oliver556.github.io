---
title: æœç´¢åŒ¹é…é«˜äº®
date: 2023-02-21 15:35:51
permalink: /pages/7b1fca/
categories:
  - å‰ç«¯æŠ€æœ¯
tags:
  - Element
---

# æœç´¢åŒ¹é…é«˜äº®

## ğŸ“–. å‰è¨€

åœ¨æ—¥å¸¸çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç”¨åˆ°äº† `el-tree` ç»„ä»¶ï¼Œæ ¹æ®äº§å“çš„éœ€æ±‚ï¼Œéœ€è¦åš `el-tree` çš„å…³é”®è¯è¿‡æ»¤åŠŸèƒ½ï¼Œå¹¶ä¸”éœ€è¦å‘½ä¸­çš„å…³é”®å­—é«˜äº®æ˜¾ç¤ºï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹å®ç°çš„è¿‡ç¨‹ã€‚

![element_02-21_01](https://cdn.staticaly.com/gh/oliver556/image-hosting@master/20230221/element_02-21_01.4w79iwqqft00.webp)

> å·¦ä¾§æ˜¯ï¼šæœç´¢å‘½ä¸­ç»“æœé«˜äº®
> 
> å³ä¾§æ˜¯ï¼šå‘½ä¸­çš„å…³é”®è¯é«˜äº®

## ä¸€. å®ç°

çœ‹äº†ä¸Šé¢çš„æ•ˆæœå›¾ï¼Œä¸‹é¢é’ˆå¯¹ä¸Šé¢çš„ä¸¤ç§æƒ…å†µåˆ†åˆ«è¿›è¡Œå®ç°ã€‚

### 1. å‘½ä¸­çš„ç»“æœé«˜äº®

å‘½ä¸­çš„ç»“æœé«˜äº®å¦‚ä¸Šçš„æ•ˆæœå›¾å·¦ä¾§éƒ¨åˆ†ï¼Œå…·ä½“çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <!-- åŒ¹é…ç»“æœé«˜äº® -->
  <div class="content-item">
    <el-input
      style="width:200px" 
      v-model="filterText"
      placeholder="æœç´¢"
      prefix-icon="el-icon-search"
      clearable
    ></el-input>
    <el-tree 
      style="width:200px" 
      ref="tree"
      node-key="gid"
      :data="userDatas"
      :filter-node-method="filterNode"
      :default-expand-all="true">
      <span class="custom-tree-node" slot-scope="{ node }">
        <span :class="node.text">{{node.label}}</span>
      </span>
    </el-tree>
  </div>
</template>
```

ä¸»è¦å°±åŒ…æ‹¬äº†ä¸€ä¸ª `el-input` å’Œ `el-tree` ç»„ä»¶

**å…³é”®ç‚¹ï¼š**

ç¬¬ä¸€ï¼šä½¿ç”¨äº† `el-tree` ç»„ä»¶è‡ªå¸¦çš„ [`filter-node-method`](https://element.eleme.cn/#/zh-CN/component/tree#attributes) å±æ€§ï¼Œæè¿°å¦‚ä¸‹ï¼š

| è¯´æ˜ | ç±»å‹ |
| :-- | :-- |
| å¯¹æ ‘èŠ‚ç‚¹è¿›è¡Œç­›é€‰æ—¶æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¿”å› true è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¾ç¤ºï¼Œè¿”å› false åˆ™è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹ä¼šè¢«éšè— | Function(value, data, node) |

ç¬¬äºŒï¼šä½¿ç”¨äº† `slot-scope` è‡ªå®šä¹‰æ ‘èŠ‚ç‚¹çš„å†…å®¹ï¼Œå‚æ•°ä¸º `{ node, data }`

```html
<script>
  export default {
    data() {
      return {
        filterText: '',
        filterText1: '',
        userDatas: [
          { 
            gid: '0001',
            label: 'æµ‹è¯•01',
            children: [
              { gid: '00012', label: 'æµ‹è¯•0112' },
              { gid: '00013', label: 'æµ‹è¯•0113' }
            ]
          },
          { 
            gid: '0002',
            label: 'æµ‹è¯•02',
            children: [
              { gid: '00021', label: 'æµ‹è¯•0221' },
              { gid: '00022', label: 'æµ‹è¯•0222'}
            ]
          },
          { 
            gid: '0003',
            label: 'æµ‹è¯•03',
            children: [
              { gid: '00031', label: 'æµ‹è¯•0331' },
              { gid: '00332', label: 'æµ‹è¯•0333' }
            ]
          },
        ]
      }
    },
    
    watch: {
      filterText(value) {
        this.$refs.tree.filter(value);
      }
    },

    methods: {
      filterNode(value, data, node) {
        node.text = '';
        if(!value) return true;
        if(data.label.indexOf(value) !== -1){
          node.text = 'red'
        }
        return data.label.indexOf(value) !== -1
      }
    }
  }
</script>
```

**å…³é”®ç‚¹ï¼š** åœ¨ **filterNode** æ–¹æ³•ä¸­å¯¹ node èŠ‚ç‚¹ä¸­çš„ text è¿›è¡Œèµ‹å€¼ï¼Œå½“å‘½ä¸­åè®¾ç½®å®ƒçš„æ ·å¼ä¸ºçº¢è‰²

ç¬¬ä¸‰ï¼šæ ·å¼

```css
.content-item {
  width: 300px;
  height: 100%;
  display: flex;
  flex-direction: column;
}
.red {
  color: red;
}
```

åˆ°è¿™é‡Œå‘½ä¸­ç»“æœé«˜äº®å·²ç»å®Œæˆã€‚

### 2. å‘½ä¸­çš„å…³é”®è¯é«˜äº®

å‘½ä¸­çš„ç»“æœé«˜äº®å¦‚ä¸Šçš„æ•ˆæœå›¾å³ä¾§éƒ¨åˆ†ï¼Œå…·ä½“çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <!-- åŒ¹é…å…³é”®å­—é«˜äº® -->
  <div class="content-item">
    <el-input
      style="width:200px"
      v-model="filterText1"
      placeholder="æœç´¢"
      prefix-icon="el-icon-search"
      clearable
    ></el-input>
    <el-tree
      style="width:200px"
      ref="tree1"
      node-key="gid"
      :data="userDatas"
      highlight-current
      :filter-node-method="filterNode1"
      :default-expand-all="true">
        <span slot-scope="{ node }" class="custom-tree-node">
            <span v-if="!filterText1">{{ node.label }}</span>
            <span v-if="filterText1" v-html="node.label.replace(new RegExp(filterText1,'g'),`<font style='color:red'>${filterText1}</font>`)" />
        </span>
    </el-tree>
  </div>
</template>
```

**å…³é”®ç‚¹ï¼š**

```html
v-html="node.label.replace(new RegExp(filterText1,'g'),`<font style='color:red'>${filterText1}</font>`)"
```

ä½¿ç”¨æ­£åˆ™å°†filterText1 æ›¿æ¢ä¸º 

```js
<font style='color:red'>${filterText1}</font>
```

```html
<script>
  export default {
    watch:{
      filterText1(value) {
        this.$refs.tree1.filter(value)
      }
    },
    
    methods: {
      filterNode1(value, data, node) {
        if(!value) return true;
        return data.label.indexOf(value) !== -1
      }
    }
  }
</script>
```

æ ·å¼ä»£ç åŒä¸Šï¼Œåˆ°è¿™é‡Œå‘½ä¸­å…³é”®å­—é«˜äº®å°±å¯ä»¥äº†ã€‚
