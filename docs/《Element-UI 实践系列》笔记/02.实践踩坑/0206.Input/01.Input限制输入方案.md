---
title: Input é™åˆ¶è¾“å…¥æ–¹æ¡ˆ
date: 2021-06-22 17:08:26
permalink: /pages/d632cc/
categories:
  - å‰ç«¯æŠ€æœ¯
tags:
  - Element
author:
  name: Jamison
  link: https://github.com/oliver556
---

# Input é™åˆ¶è¾“å…¥æ–¹æ¡ˆ

## ğŸ“–. å‰è¨€

åœ¨æ—¥å¸¸é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ° ElementUI è¿™ä¸ªç»„ä»¶åº“ï¼Œå…¶ä¸­çš„ el-input ç»„ä»¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹æ•°å­—çš„è¿›è¡Œé™åˆ¶çš„åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯æœ‰çš„é¡¹ç›®ä¸­éœ€è¦é™åˆ¶åªèƒ½å¡«å†™æ•°å­—ï¼Œä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œä¸èƒ½æœ‰å¤šä¸ªå°æ•°ç‚¹ï¼Œå°æ•°ä½å¤šå°‘ï¼Œæ•´æ•°ä½å¤šå°‘ç­‰ç­‰ã€‚

è¿™äº›éœ€æ±‚ä¸‹ï¼Œç»„ä»¶é»˜è®¤çš„åŠŸèƒ½å°±å¾ˆéš¾æ»¡è¶³äº†ï¼Œéœ€è¦ä¸“é—¨å†™ä»£ç æ¥æ§åˆ¶ã€‚

ä¸ºäº†å‡å°‘å¼€å‘æˆæœ¬ï¼Œæé«˜å·¥ä½œæ•ˆç‡ï¼Œæˆ‘æ•´ç†äº†å¦‚ä¸‹2ç§æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å®é™…æƒ…å†µä½¿ç”¨ï¼Œä»¥ä¸‹æ–¹æ³•ä»æ—§é€‚ç”¨æ™®é€š input æ ‡ç­¾ã€‚

## ä¸€. æ–¹æ³•ä¸€

> ä½¿ç”¨è¡Œå†…æ­£åˆ™æ§åˆ¶ã€‚

```js
oninput ="value=value.replace(/[^\d]/g, '')" // åªèƒ½è¾“å…¥æ•°å­—(æ­£æ•´æ•°)
oninput ="value=value.replace(/[^\-\d]/g, '')" // åªèƒ½è¾“å…¥æ•°å­—ï¼ˆåŒ…å«æ­£è´Ÿæ•°ï¼‰
oninput ="value=value.replace(/[^\-\d.]/g, '')" // åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°
oninput ="value=value.replace(/[^\d.]/g, '').replace(/^(\d+)\.(\d\d).*$/, '$1.$2')" // åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°ï¼Œåªä¿ç•™ä¸€ä¸ªå°æ•°ç‚¹
oninput ="value=value.replace(/[^\-\d.]/g, '').replace(/^(\-)*(\d+)\.(\d+).*$/, '$1$2.$3')" // åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°ï¼Œåªä¿ç•™ä¸€ä¸ªå°æ•°ç‚¹(åŒ…å«è´Ÿæ•°)
oninput ="value=value.replace(/[^\-\d.]/g, '').replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3')" // åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°ï¼Œåªä¿ç•™ä¸€ä¸ªå°æ•°ç‚¹ï¼Œåªä¿ç•™2ä½å°æ•°(åŒ…å«è´Ÿæ•°)
oninput ="value=value.replace(/[^\-\d.]/g, '').replace(/^(\-)*(\d+)\.(\d${3}).*$/, '$1$2.$3')" // åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°ï¼Œåªä¿ç•™ä¸€ä¸ªå°æ•°ç‚¹ï¼Œåªä¿ç•™3ä½å°æ•°(åŒ…å«è´Ÿæ•°)
oninput ="value=value.replace(/[^\-\d.]/g, '').replace(/(\.)(\d*)(\1*)/g,'$1$2').replace(/^(\-)*(\d+)\.(\d{2}).*$/, '$1.$2')" // ã€ç»ˆæã€‘åªèƒ½è¾“å…¥æ•°å­—å’Œå°æ•°ï¼Œåªä¿ç•™ä¸€ä¸ªå°æ•°ç‚¹ï¼Œåªä¿ç•™3ä½å°æ•°(åŒ…å«è´Ÿæ•°)
```

> ä½¿ç”¨ç¤ºä¾‹ï¼š

```html
<template>
  <el-form-item label="è§’è‰²Id">
    <el-input type="text" size="small" width="50" v-model="param.roleId" placeholder="è¯·è¾“å…¥æ•°å­—" oninput="value=value.replace(/[^\d]/g,'')">
  </el-form-item>
  <el-input v-model="money" oninput ="value=value.replace(/[^\d.]/g,'')">
    <span slot="suffix">/ å…ƒ </span>
  </el-input> 
</template>
```

## äºŒ. æ–¹æ³•äºŒï¼ˆæ¨èğŸ‘‰ï¼‰

> ä½¿ç”¨å°è£…çš„é€šç”¨æ–¹æ³•è¿›è¡Œæ›´ç»†ç²’åº¦çš„ç»Ÿä¸€æ§åˆ¶ï¼Œå¯å•ç‹¬æ§åˆ¶æ•´æ•°ä½å’Œå°æ•°ä½ä¸ªæ•°ã€‚

ä¸»è¦åšäº†å¦‚ä¸‹é™åˆ¶ï¼š

- é™åˆ¶åªèƒ½å¡«å†™æ•°å­—ç±»å‹ï¼›
- é™åˆ¶æ•´æ•°å’Œå°æ•°ä½æ•°ï¼›
- é™åˆ¶åªæœ‰ä¸€ä¸ªå°æ•°ç‚¹ï¼›
- é™åˆ¶ä¸èƒ½ä»¥å°æ•°ç‚¹å¼€å¤´ï¼›
- é™åˆ¶æ•´æ•°ä¸å‡ºç°00çš„æƒ…å†µï¼›

> é€šç”¨æ–¹æ³• CheckNum æºç ï¼š

ï¼ï¼è¿™é‡ŒæŒ‚è½½åˆ°windowå¯¹è±¡ä¸Šï¼Œä¸ºäº†åé¢æ–¹ä¾¿ä½¿ç”¨ï¼Œè®°å¾—åŠæ—¶æ¸…ç†ä¸ç”¨çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨ `beforeDestory` ç”Ÿå‘½å‘¨æœŸä¸­ç›´æ¥æŠŠå˜é‡èµ‹å€¼ä¸º null æ¥æ¸…é™¤å¼•ç”¨ã€‚

```js
/**
 * @Description: ç”¨äºé™åˆ¶ input è¾“å…¥çš„æ•°å­—ä½æ•°ï¼ˆåŒ…å«å°æ•°ä½ï¼‰
 * @param { Any } obj â†’ å½“å‰ DOM this
 * @param { Number } intNum â†’ è¡¨ç¤ºæ•´æ•°ä½ä¸ªæ•°ï¼Œ é»˜è®¤ 0 ä¸ºä¸é™åˆ¶
 * @param { Number } decNum â†’ è¡¨ç¤ºå°æ•°ä½ä¸ªæ•°ï¼Œé»˜è®¤ 0 ä¸ºæ²¡å°æ•°
 * @param { Boolean } NegNum â†’ æ˜¯å¦å¯ä»¥è¾“å…¥è´Ÿæ•°, é»˜è®¤ false ä¸å¯è¾“å…¥è´Ÿæ•°
 */
window.checkNum = function(obj, intNum = 0, decNum = 0, NegNum = false) {
  let value = obj.value;
  let changeValue;
  let t1;
  let t2;
  switch (decNum) {
    case 0:
      value = NegNum ? value.replace(/[^\-\d]/g, '') : value.replace(/[^\d]/g, ''); // å»é™¤æ•°å­—ä»¥å¤–çš„å­—ç¬¦ï¼Œè‹¥è¦æ”¯æŒè´Ÿæ•°ï¼Œå¯å°†æ­¤å¤„æ­£åˆ™æ”¹ä¸º/[^\-\d]/g
      value = value.replace(/^0\d+/g, '0'); // é˜²æ­¢æ•´æ•°ä½å‡ºç° 00 çš„æƒ…å†µ
      value = (value.length > 1) ? value.charAt(0) + value.substr(1).replace(/[^\d.]/g, '') : value; // ç¡®ä¿æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè´Ÿå·
      
      if (intNum !== 0) {
        value = value.substr(0, intNum);
      }
      break;
    default:
      // å»é™¤æ•°å­—å’Œå°æ•°ç‚¹ä»¥å¤–çš„å­—ç¬¦ï¼Œè‹¥è¦æ”¯æŒè´Ÿæ•°ï¼Œå¯å°†æ­¤å¤„æ­£åˆ™æ”¹ä¸º/[^\-\d.]/g
      value = NegNum ? value.replace(/[^\-\d.]/g, '') : value.replace(/[^\d.]/g, '');
      
      // ä¿è¯ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ•°å­—ï¼Œè‹¥è¦æ”¯æŒè´Ÿæ•°ï¼Œå¯å°†æ­¤å¤„æ­£åˆ™æ”¹ä¸º/^[^\-\d]/g
      value = NegNum ? value.replace(/^[^\-\d]/g, '') : value.replace(/^[^\d]/g, '');
      
      // ç¡®ä¿æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè´Ÿå·
      value = (value.length > 1) ? value.charAt(0) + value.substr(1).replace(/[^\d.]/g, '') : value;
      
      // é˜²æ­¢æ•´æ•°ä½å‡ºç°'00'çš„æƒ…å†µ
      if (value.length > 2 && value.charAt(0) === '-' && value.charAt(1) === '0' && value.charAt(2) !== '.') {
        value = `-${value.substr(2)}`;
      }
      
      // å»é™¤ç¬¬äºŒä¸ªå°æ•°ç‚¹
      value = value.replace(/\.{2}/g, '.');
      value = value.replace(/^0\d+/g, '0');
      
      changeValue = value.split('.');
      if (changeValue.length > 1) { // è¡¨ç¤ºç”¨æˆ·è¾“å…¥çš„æ—¢æœ‰æ•´æ•°åˆæœ‰å°æ•°
        if (intNum === 0) {
          t1 = changeValue[0];
        } else {
          t1 = changeValue[0].substr(0, intNum);
        }
        t2 = changeValue[1].substr(0, decNum);
        value = t1 + '.' + t2;
      } else {
        if (intNum !== 0) {
          value = value.substr(0, intNum);
        }
      }
      break;
  }
  if (obj.value !== value) {
    obj.value = value;
  }
  return value;
}
```

> ä½¿ç”¨ç¤ºä¾‹ï¼š

```html
<template>
  <el-form-item label="è§’è‰²Id">
    <el-input type="text" size="small" width="50" v-model="param.roleId" placeholder="è¯·è¾“å…¥æ•°å­—" oninput="checkNum(this, 4, 1)">
  </el-form-item>
</template>
```

> è®°å¾—åŠæ—¶æ¸…é™¤å¼•ç”¨

```js
beforeDestroy() {
  window.checkNum = null;
}
```

## ğŸ“–. å‚è€ƒ

- [replace æ­£åˆ™è¡¨è¾¾å¼,Nä½å°æ•°ç‚¹](https://blog.csdn.net/Alice9969/article/details/78280758)
- [inputæ¡†åªèƒ½è¾“å…¥æ•°å­—åŠä¸€ä½å°æ•°ç‚¹](https://blog.csdn.net/qq_39548647/article/details/80364472)
- [å¯¹è¾“å…¥æ¡†çš„æ•´æ•°ä½æ•°å’Œå°æ•°ä½æ•°åšé™åˆ¶](https://blog.csdn.net/zlqzhlq/article/details/82631167)
- [element-uié™åˆ¶åªèƒ½è¾“å…¥ 0 å’Œè´Ÿæ•°ï¼ˆå°æ•°ä½æœ€å¤š2ä½ï¼Œæ•´æ•°ä½æœ€å¤š5ä½ï¼‰](https://blog.csdn.net/qq_42243957/article/details/110133854)
- [vue+element ä¸­ el-inputæ¡† é™åˆ¶åªèƒ½è¾“å…¥æ•°å­—åŠä¸€ä½å°æ•°](https://www.shuzhiduo.com/A/kvJ3YQAXdg/)
- [é™åˆ¶ el-input åªèƒ½è¾“å…¥æ•°å­—](https://bbchin.com/archives/input-limit)
